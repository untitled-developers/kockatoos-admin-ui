import{aF as v,aH as V,aI as k,c as x,o as w,d as I,ay as M,aG as S,u as N,X as l,k as t,dl as $,aJ as i,a7 as C,h as g,U as D,V as L}from"./index-G2v3Dc-N.js";import{u as R,a as T,o as _,s as B}from"./useCreateFormSchema-nc6YvQv2.js";import{_ as b,a as h}from"./BaseInputContainer-DoaKkC8c.js";import{B as q}from"./BasePageContent-eTpsnp7H.js";import{B as P}from"./BaseCard-bpjn0mJ1.js";function j(){return{consoleDevLog:(...u)=>{}}}const G=["id"],H={__name:"BaseForm",props:v({formId:{type:String,required:!0}},{formData:{},formDataModifiers:{},formSchema:{},formSchemaModifiers:{}}),emits:v(["submit"],["update:formData","update:formSchema"]),setup(m,{expose:u,emit:a}){const f=m,n=a,{consoleDevLog:p}=j(),{get:e}=R(),o=V(m,"formData"),d=V(m,"formSchema"),r=k(()=>U());function E(s){p(`Form ${f.formId} submitted`,s,r.value),n("submit",s,r.value)}function F(s){if(!r.value||r.value.success)return[];const c=e(r.value,s);return c?c._errors||[]:[]}function U(){if(!d.value)throw new Error("BaseForm error: formSchema is not defined");if(!o.value)throw new Error("BaseForm error: formData is not defined");const s=d.value.safeParse(o.value);return s.success?{success:!0}:s.error.format()}function y(){return r.value&&!r.value.success}return u({errors:r}),(s,c)=>(w(),x("form",{id:m.formId,onSubmit:M(E,["prevent"])},[I(s.$slots,"default",{getErrors:F,hasError:y})],40,G))}},O={__name:"BaseFormView",setup(m){const u=S(),a=S({name:"",email:""}),{createFormSchema:f}=T(a),n=f(_({name:B().min(1,"Name is required"),email:B().email("Invalid email address")}));return(p,e)=>(w(),N(q,null,{default:l(()=>[t(P,null,{footer:l(()=>{var o;return[g("pre",null,[e[6]||(e[6]=D("          ")),g("code",null,`
            `+L((o=u.value)==null?void 0:o.errors)+`
          `,1),e[7]||(e[7]=D(`
        `))])]}),default:l(()=>[t(H,{"form-id":"test-form","form-data":a.value,"onUpdate:formData":e[4]||(e[4]=o=>a.value=o),"form-schema":i(n),"onUpdate:formSchema":e[5]||(e[5]=o=>$(n)?n.value=o:null),ref_key:"formRef",ref:u},{default:l(({getErrors:o,hasError:d})=>[t(b,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.name=r),name:"name",label:"Name","show-errors":"",errors:o("name")},{default:l(()=>[t(i(h),{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.name=r)},null,8,["modelValue"])]),_:2},1032,["modelValue","errors"]),t(b,{modelValue:a.value.email,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.email=r),name:"email",label:"Email","show-errors":"",errors:o("email")},{default:l(()=>[t(i(h),{modelValue:a.value.email,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.email=r)},null,8,["modelValue"])]),_:2},1032,["modelValue","errors"]),t(i(C),{type:"submit",label:"Submit"})]),_:1},8,["form-data","form-schema"])]),_:1})]),_:1}))}};export{O as default};
